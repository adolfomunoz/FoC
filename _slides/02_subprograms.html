---
title: Subprograms
---
<section>
    <section>
        <h1>Subprograms</h1>

		<p>A subprogram is a part of your program that implements an independent algorithm that
            can be used from different places within the rest of the program</p>

    </section>

    <section>
        <h2>Problem</h2>
        <blockquote>
        Develop a program that, given a number <b>n</b> of lines, 
        draws a triangle with asterisks (<code>'*'</code>).
        </blockquote>

        Example for <b>n=5</b>:

        <pre><code>
            *
           ***
          *****
         *******
        *********
        </code></pre> 
    </section>

    <section>
        <pre><code class="hljs cpp" data-trim data-line-numbers><script type="text/template">
        {%- include src/triangle/triangle.cpp -%}

		</script></code></pre>
    </section>

    <section>
        <h2>Problem</h2>
        <blockquote>
        Develop a program that, given a numerator and denominator, 
        simplifies the rational number.
        </blockquote>
        <h2>Problem</h2>
        <blockquote>
        Develop a program that calculates the least common multiple
        of two given numbers.
        </blockquote>
    </section>

    <section>
        <pre><code class="hljs cpp" data-trim data-line-numbers><script type="text/template">
        {%- include src/gcf/simplify.cpp -%}

		</script></code></pre>

        <pre><code class="hljs cpp" data-trim data-line-numbers><script type="text/template">
        {%- include src/gcf/lcm.cpp -%}
    
        </script></code></pre>
    </section>

    <section>
        <h1>Subprograms</h1>
        {%- include img/subprogram.svg -%}
    </section>

	<section data-auto-animate>
		<p><strong>Specification :</strong>What does it do?</p>
        <img src="{{ site.baseurl }}/img/subprogram-specification.jpg"/>
    </section>

    <section data-auto-animate>
		<p><strong>Specification :</strong>What does it do?</p>
        {%- include img/subprogram-specification.svg -%}
    </section>

    <section data-auto-animate>
		<p><strong>Implementation :</strong>How does it do it?</p>
        <img src="{{ site.baseurl }}/img/subprogram-implementation.png"/>
    </section>

    <section data-auto-animate>
		<p><strong>Implementation :</strong>How does it do it?</p>
        {%- include img/subprogram-implementation.svg -%}
    </section>

    <section>
        <h1>Thinking with subprograms</h1>
        <ul>
            <li>Define a large problem as a composition of partial solutions from subproblems</li>
            <li>For each subproblem: develop its implementation or use implementation from others</li>
        </ul>
    </section>

    <section>
        <h3>Advantages</h3>
        <ul>
            <li>Legibility (shorter code)</li>
            <li>Mantainability (bugs/changes are easily located)</li>
            <li>You <strong>don't repeat yourself</strong></li>
        </ul>    
    </section>
</section>
<section>
    <section>
        <h2 class="r-fit-text">Subprograms</h2>
        <p class="r-fit-text">are represented in C++ as</p>
        <h2 class="r-fit-text">functions</h2>
    </section>
    <section data-auto-animate>
        <h2>Function specification</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
		    return_type function_name(type1 parameter1, type2 parameter2);	
		</code></pre>
    </section>
    <section data-auto-animate>
        <h2>Function specification</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
            /**
             * The function function_name does ...
             * parameter1 represents ...
             * parameter2 is ...
             * returns the result ...
             **/
		    return_type function_name(type1 parameter1, type2 parameter2);	
		</code></pre>
    </section>
    <section>
        <h2>Specification example</h2>
        <pre><code class="hljs cpp" data-trim>
            /**
             * The function repeat outputs the same charater a number of times.
             * 
             * n represents the number of times
             * c is the character that is repeated
             * The function returns nothing
             */
            void repeat(int n, char c);	
		</code></pre>
    </section>
    <section>
        <h2>Specification example</h2>
        <pre><code class="hljs cpp" data-trim>
            /**
             * The function gcf calculates the greatest common factor
             * between two numbers.
             * 
             * a y b are the two numbers
             * The function returns the calculated greatest common factor
             */
            int gcf(int a, int b);	
		</code></pre>
    </section>
    <section>
        <h2>Online documentation</h2>
        <h3><a href="http://github.com/antirez/smaz">link</a></h3>
    </section>
</section>

<section>
    <section>
        <h1>Copy vs Reference</h1>
    </section>

    <section>
        <p>What does this do? How is it different from previous examples?</p>
        
        <pre><code class="hljs cpp" data-trim data-line-numbers><script type="text/template">
            {%- include src/order3/order3.cpp -%}
    
        </script></code></pre>
    </section>
    <section data-auto-animate>
        <p>Parameters are copied, so they do not change. Does not work!</p>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
            /**
             * Swaps real values 
             * 
             * a and b are the values to be swapped
             * Returns nothing
             */
            void swap(float a, float b);	
		</code></pre>
    </section>
    <section data-auto-animate>
        <p>Parameters are referenced, so they must be variables. Works!</p>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
            /**
             * Swaps the real values of the variables 
             * 
             * a and b are references to the variables
             * Returns nothing
             */
            void swap(float& a, float& b);	
		</code></pre>
    </section>

    <section>
        <h1>Parameters by copy</h1>
        <p>By default: when invoking, values of arguments are
             copied to the corresponding parameters</p>
    </section>

    <section data-auto-animate>
        <h2>Parameters by copy</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
        float x = 5; float y = 3;
        swap(x,y);
        </code></pre>
        <ul>
            <li><code>a</code> gets the value of <code>x</code> (5)</li>
            <li><code>b</code> gets the value of <code>y</code> (3)</li>
        </ul>
        <pre><code class="hljs cpp" data-trim>
        void swap(float a, float b);
        </code></pre>        
    </section>

    <section data-auto-animate>
        <h2>Parameters by copy</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
        swap(5,3);
        </code></pre>
        <ul>
            <li><code>a</code> gets the value of <code>x</code> (5)</li>
            <li><code>b</code> gets the value of <code>y</code> (3)</li>
        </ul>
        <pre><code class="hljs cpp" data-trim>
        void swap(float a, float b);
        </code></pre>        
    </section>

    <section>
        <h1>Parameters by reference</h1>
        <p>When invoking, the argument variables are referenced (aliased).
           Whatever happens to the parameters happens to the variables</p>
        <ul class="fragment">
            <li>They work as <strong>output</strong> parameters.</li>
            <li>They are related to <strong>pointers</strong> (see later)</li>
        </ul>
    </section>
    <section data-auto-animate>
        <h2>Parameters by reference</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
        float x = 5; float y = 3;
        swap(x,y);
        </code></pre>
        <ul>
            <li><code>a</code> gets a reference to <code>x</code></li>
            <li><code>b</code> gets a reference to <code>y</code></li>
        </ul>
        <pre><code class="hljs cpp" data-trim>
        void swap(float& a, float& b);
        </code></pre>        
    </section>
    
    <section data-auto-animate>
        <h2>Parameters by reference</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
        float x = 5; float y = 3;
        swap(x,y);
        //swap(5,3) does not compile
        </code></pre>
        <ul>
            <li><code>a</code> gets a reference to <code>x</code></li>
            <li><code>b</code> gets a reference to <code>y</code></li>
        </ul>
        <pre><code class="hljs cpp" data-trim>
        void swap(float& a, float& b);
        </code></pre>        
    </section>
    
    <section data-auto-animate>
        <h2>Parameters by reference</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
        float x = 5; float y = 3;
        swap(x,y);
        //swap(5,3) does not compile
        </code></pre>
        <ul>
            <li>Whatever happens to <code>a</code> happens to <code>x</code></li>
            <li>Whatever happens to <code>b</code> happens to <code>y</code></li>
        </ul>
        <pre><code class="hljs cpp" data-trim>
        void swap(float& a, float& b);
        </code></pre>        
    </section>

    <section>
        <h2>Copy vs. reference: cost</h2>
        <ul>
            <li>Cost of copy proportional to data type's size</li>
            <li>Cost of reference is constant (always 64 bits)</li>
        </ul>
    </section>

    <section data-auto-animate>
        <h2>Copy vs. reference: cost</h2>
        <pre><code class="hljs cpp" data-trim>
            struct BigType {
                float v[1000000]; 
            }; 
        </code></pre>

        This is too costly:
        <pre><code class="hljs cpp" data-trim>
            void function(BigType bt);
        </code></pre>

        This might modify it (and sometimes I don't want to):
        <pre><code class="hljs cpp" data-trim>
            void function(BigType& bt);
        </code></pre>         
    </section>

    <section data-auto-animate>
        <h2>Copy vs. reference: cost</h2>
        <pre><code class="hljs cpp" data-trim>
            struct BigType {
                float v[1000000]; 
            }; 
        </code></pre>

        <pre><code class="hljs cpp" data-trim>
            void function(const BigType& bt);
        </code></pre>

        <p class="fragment">More about this later in this course</p>
    </section>
</section>



<section>
       <section data-auto-animate>
        <h2>Function implementation</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
		    return_type function_name(type1 parameter1, type2 parameter2);	
		</code></pre>
    </section>
    <section data-auto-animate>
        <h2>Function implementation</h2>
        <pre data-id="code-animation"><code class="hljs cpp" data-trim>
		    return_type function_name(type1 parameter1, type2 parameter2) {
                //Code that implements the behavior of the function
            } 
		</code></pre>
    </section>
    <section>
        <h2>Implementation example</h2>
        <pre><code class="hljs cpp" data-trim><script type="text/template">
            void repeat(int n, char c) {
                for (int i = 0;i < n;++i)
                    std::cout << c ;                
            } 	
		</script></code></pre>
    </section>
</section>

<section>
    <section>
        <h1>Function testing</h1>
    </section>
</section>